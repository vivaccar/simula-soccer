<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SimulaSoccer</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</head>
<style>
/*     .table-responsive {
        overflow-x: auto;
    }

     @media (max-width: 768px) {
        .right-column {
            margin-top: 20px;
        }
    }
    
     .left-column {
        margin-right: 10px;
    }
*/
    .right-column {
        margin-left: 5%;
    } 
	.league_title {
		text-align: center;
		font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
		color: black;
		font-size: 30px;
	}
	.table-cel {
		width: 8%;
		text-align: center;
	}
</style>
<body>
	<nav class="navbar navbar-inverse" style="background-color: rgb(168, 189, 53);">
		<div class="container-fluid">
			<div class="navbar-header">
				{% load static %}
				<a href="{% url 'home' %}" ><img src="{% static 'images/logo.png' %}" alt="logo" width="30%" height="30%"></a>
			  </div>
		</div>
	</nav>
	<br>
	<div style="display: inline;">
		<h2 class="league_title">{{ league.league_name }} <img style="width: 3%;" height="3%" src="{{ league.logo }}"></h2>
	</div>
	<div class="container-fluid">
		<div class="row" style="width: 100%; height: 90%;">
			<div class="col-lg-6 left-column">
				<br>
				<div class="table-responsive">
					<table class="table-striped">
						<thead style="background-color: gainsboro;">
							<th></th>
							<th></th>
							<th class="table-cel">P</th>
							<th class="table-cel">J</th>
							<th class="table-cel">V</th>
							<th class="table-cel">E</th>
							<th class="table-cel">D</th>
							<th class="table-cel">G</th>
							<th class="table-cel">GS</th>
							<th class="table-cel">SG</th>
							<th class="table-cel">%</th>
						</thead>
						<tbody>
							{% for team in teams_list %}
							<tr>
								<td class="text-center mb-4" {% if forloop.counter < 5 %}style="background-color: green; color:white" {% elif forloop.counter < 7 %}style="background-color: rgb(197, 165, 22); color: white" {% elif  forloop.counter > 16 %}style="background-color: red; color: white"{% endif %}>{{ forloop.counter }}</td>
								<td><img src="{{ team.logo }}" alt="" width="13%" height="13%"> {{ team.name }}</td>
								<td class="text-center mb-4">{{ team.points }}</td>
								<td class="text-center mb-4">{{ team.games_played }}</td>
								<td class="text-center mb-4">{{ team.wins }}</td>
								<td class="text-center mb-4">{{ team.draws }}</td>
								<td class="text-center mb-4">{{ team.loss }}</td>
								<td class="text-center mb-4">{{ team.goals_pro }}</td>
								<td class="text-center mb-4">{{ team.goals_con }}</td>
								<td class="text-center mb-4">{{ team.sg }}</td>
								<td class="text-center mb-4">{{ team.aproveitamento }}%</td>
							</tr>
							{% endfor %}
						</tbody>
					</table>
				</div>
			</div>
			<div class="right-column">
	            <div class="d-flex justify-content-between align-items-center mt-4">
					<form class="d-inline" method="post" action="{% url 'prev_round' %}">
						{% csrf_token %}
						<input type="hidden" name="current_round" value="{{ current_round }}">
						<input type="hidden" name="league_id" value="{{ league.league_id }}">
						<button type="submit" class="btn btn-outline-success btn-sm" {% if current_round == 1 %}disabled{% endif %}>
							<i class="fas fa-chevron-left"></i> Anterior
						</button>
					</form>
					<h4 style="font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">RODADA {{current_round}}</h4>
					<form class="d-inline" method="post" action="{% url 'next_round' %}">
						{% csrf_token %}
						<input type="hidden" name="current_round" value="{{ current_round }}">
						<input type="hidden" name="league_id" value="{{ league.league_id }}">
						<button type="submit" class="btn btn-outline-success btn-sm" {% if current_round == 38 %}disabled{% endif %}>
							Pr√≥xima <i class="fas fa-chevron-right"></i>
						</button>
					</form>
				</div>
				<ul style="text-align: center;" class="list-group">
					{% for game in games_list %}
					<form id="form_{{ game.id }}" method="post" action="{% url league.url %}">
					{% csrf_token %}
					<div style="border-bottom: 1px solid rgb(84, 82, 117);">
						<input type="hidden" name="home_team" value="{{ game.home_team.name }}">
						<input type="hidden" name="away_team" value="{{ game.away_team.name }}">
						<input type="hidden" name="game_id" value="{{ game.id }}">
						<img src="{{ game.home_team.logo }}" alt=""  height="8%" width="8%"> <!-- {{ game.home_team.name }} -->
						<input type="number" {% if game.real_played == True %}disabled{% endif %} name="home_goals" id="home_goals_{{ game.id }}" min="0" max="9" value="{{ game.home_goals }}">	
						X
						<input type="number"  {% if game.real_played == True %}disabled{% endif %} name="away_goals" id="away_goals_{{ game.id }}" min="0" max="9" value="{{ game.away_goals }}">
						<!-- {{ game.away_team.name }}  --><img src="{{ game.away_team.logo }}" alt="" height="8%" width="8%">
						<p style="font-size: 12px;">{{ game.home_team.stadium }} - {{ game.local_time }}</p>
					</div>
					</form>
					<script>
						document.addEventListener('DOMContentLoaded', function() {
							var homeGoalsInput = document.getElementById('home_goals_{{ game.id }}');
							var awayGoalsInput = document.getElementById('away_goals_{{ game.id }}');
							var form = document.getElementById('form_{{ game.id }}');
			
							homeGoalsInput.addEventListener('input', function() {
								checkInputs();
							});
			
							awayGoalsInput.addEventListener('input', function() {
								checkInputs();
							});
			
							function checkInputs() {
								if (homeGoalsInput.value !== '' && awayGoalsInput.value !== '') {
									form.submit();
								}
							}
						});
					</script>
					{% endfor %}
				</ul>
			</div>
		</div>
	</div>
	<br>
</body>
<div align="center">
	<form method="post" action="{% url 'restart' %}">
	{% csrf_token %}
	<input type="hidden" name="league_id" value="{{ league.league_id }}">
	<button type="submit" class="btn btn-outline-success btn-sm">
		Restart <i class="fas fa-chevron-right"></i>
	</button>
	</form>
</div>	
<!-- <form method="post" action="{% url 'api' %}">
{% csrf_token %}
<input type="submit" value="API">
</form> -->
</html>

